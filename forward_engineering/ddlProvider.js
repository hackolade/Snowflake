"use strict";var Sn=Object.defineProperty;var n=(r,i)=>Sn(r,"name",{value:i,configurable:!0});var X=(r,i)=>()=>(i||r((i={exports:{}}).exports,i),i.exports);var it=X((Rr,st)=>{"use strict";st.exports={number:"NUMBER",string:"VARCHAR",date:"DATE",timestamp:"TIMESTAMP",binary:"BINARY",boolean:"BOOLEAN",document:"OBJECT",array:"ARRAY",objectId:"VARCHAR(24)",default:"CHAR"}});var ct=X((Cr,ot)=>{"use strict";ot.exports={NUMBER:{capacity:12,mode:"decimal"},DECIMAL:{capacity:12,mode:"decimal"},NUMERIC:{capacity:12,mode:"decimal"},INT:{capacity:4},INTEGER:{capacity:4},BIGINT:{capacity:8},BYTEINT:{capacity:1},TINYINT:{capacity:1},SMALLINT:{capacity:2},REAL:{capacity:4,mode:"floating"},FLOAT:{capacity:8,mode:"floating"},FLOAT4:{capacity:4,mode:"floating"},FLOAT8:{capacity:8,mode:"floating"},DOUBLE:{capacity:8,mode:"floating"},"DOUBLE PRECISION":{capacity:8,mode:"floating"},VARCHAR:{mode:"varying"},CHAR:{size:1},CHARACTER:{size:1},STRING:{mode:"varying"},TEXT:{mode:"text"},BINARY:{size:8e3,mode:"binary"},VARBINARY:{size:8e3,mode:"binary"},BOOLEAN:{mode:"boolean"},DATE:{format:"YYYY-MM-DD"},DATETIME:{format:"YYYY-MM-DD hh:mm:ss.nn"},TIME:{format:"hh:mm:ss"},TIMESTAMP:{format:"YYYY-MM-DD hh:mm:ss"},TIMESTAMP_LTZ:{format:"YYYY-MM-DD hh:mm:ss.nnnnnnZ"},TIMESTAMPLTZ:{format:"YYYY-MM-DD hh:mm:ss.nnnnnnZ"},TIMESTAMP_NTZ:{format:"YYYY-MM-DD hh:mm:ss.nnn"},TIMESTAMPNTZ:{format:"YYYY-MM-DD hh:mm:ss.nnn"},"TIMESTAMP WITHOUT TIME ZONE":{format:"YYYY-MM-DD hh:mm:ss.nnn"},TIMESTAMP_TZ:{format:"YYYY-MM-DD hh:mm:ss"},TIMESTAMPTZ:{format:"YYYY-MM-DD hh:mm:ss"},"TIMESTAMP WITH LOCAL TIME ZONE":{format:"YYYY-MM-DD hh:mm:ss"},"TIMESTAMP WITH TIME ZONE":{format:"YYYY-MM-DD hh:mm:ss"},VARIANT:{format:"semi-structured"},OBJECT:{format:"semi-structured",mode:"object"},ARRAY:{format:"semi-structured",mode:"array"},GEOGRAPHY:{mode:"geography"}}});var Ve=X((Or,mt)=>{"use strict";mt.exports={createDatabase:"CREATE DATABASE IF NOT EXISTS ${name};\nUSE DATABASE ${name};\n",createSchema:"CREATE${transient} SCHEMA IF NOT EXISTS ${name}${managed_access}${data_retention}${comment};\nUSE SCHEMA ${name};\n",dropSchema:"DROP SCHEMA IF EXISTS ${name};\n",createTable:"CREATE${orReplace}${temporary}${transient} TABLE${tableIfNotExists}\n	${name} (\n		${column_definitions}${out_of_line_constraints}\n	)${tableOptions};\n",createDynamicTable:"CREATE${orReplace}${transient}${dynamic}${iceberg} TABLE${tableIfNotExists}\n	${name}\n${column_definitions}${targetLag}${warehouse}${externalVolume}${catalog}${catalogTableName}${catalogNamespace}${catalogSync}${metadataFilePath}${replaceInvalidCharacters}${autoRefresh}${storageSerializationPolicy}${baseLocation}${refreshMode}${initialize}${clusterKeys}${dataRetentionTime}${maxDataExtensionTime}${changeTracking}${defaultDdlCollation}${copyGrants}${comment}${tagsStatement}${selectStatement};\n",createLikeTable:"CREATE TABLE IF NOT EXISTS ${name} LIKE ${source_table}${tableOptions};\n",createCloneTable:"CREATE TABLE IF NOT EXISTS ${name} CLONE ${source_table}${tableOptions};\n",createAsSelect:"CREATE TABLE IF NOT EXISTS ${name} AS ${selectStatement}${tableOptions};\n",createExternalTable:"CREATE${orReplace} EXTERNAL TABLE${tableIfNotExists}\n	${name} (\n		${column_definitions}${out_of_line_constraints}\n	)${tableOptions};\n",columnDefinition:"${name} ${type}${collation}${default}${identity}${autoincrement}${not_nul}${inline_constraint}${comment}${tag}",externalColumnDefinition:"${name} ${type} as ${expression}${comment}",createTableForeignKey:"${constraint}FOREIGN KEY (${columns}) REFERENCES ${primary_table} (${primary_columns})",alterTableForeignKey:"ALTER TABLE IF EXISTS ${table_name} ADD ${constraint}FOREIGN KEY (${columns}) REFERENCES ${primary_table} (${primary_columns});",createView:"CREATE${secure}${materialized} VIEW IF NOT EXISTS ${name} (\n	${column_list}\n)\n${copy_grants}${comment}${tag}${clustering}AS ${select_statement};\n",createUDF:"CREATE${orReplace} FUNCTION ${name}(${arguments})\n	RETURNS ${returnType}${notNull}\n	LANGUAGE ${language}${parameters}${comment}\n	AS ${body};\n",createProcedure:"CREATE${orReplace} PROCEDURE ${name}(${arguments})\n	RETURNS ${returnType}${notNull}\n	LANGUAGE ${language}${parameters}${comment}\n	AS ${body};\n",createSequence:"CREATE SEQUENCE IF NOT EXISTS ${name} START ${start} INCREMENT ${increment}${comment};\n",createFileFormat:"CREATE FILE FORMAT IF NOT EXISTS ${name}${options}${comment};\n",createStage:"CREATE${temporary} STAGE IF NOT EXISTS ${name} ${url}${storageIntegration}${credentials}${encryption};\n",alterSchema:"ALTER SCHEMA IF EXISTS ${name} ${operation} ${options};",alterTable:"ALTER${dynamic} TABLE IF EXISTS ${name} ${action};",alterView:"ALTER${materialized} VIEW IF EXISTS ${name} ${action};",alterSchemaScript:"ALTER SCHEMA IF EXISTS ${name} ",alterTableScript:"ALTER${dynamic} TABLE IF EXISTS ${name} ",alterEntityRename:"RENAME TO ${name};\n",alterViewScript:"ALTER VIEW IF EXISTS ${name} ",alterMaterializedViewScript:"ALTER MATERIALIZED VIEW ${name} ",setPropertySchema:"SET ${property};\n",unsetPropertySchema:"UNSET ${property};\n",setPropertyTable:"SET ${property};\n",manageAccessSchema:"${access} MANAGED ACCESS;\n",createTag:"CREATE${orReplace} TAG${ifNotExist} ${name}${allowedValues}${comment};\n",dropTag:"DROP TAG IF EXISTS ${name};\n",alterTag:"ALTER TAG${ifExists} ${name} ${option}${optionValue};\n"}});var Ge=X((_r,Tt)=>{"use strict";var yn=["DROP SCHEMA","DROP TABLE","DROP COLUMN","DROP VIEW","DROP TAG"],dn={JAVA:"java",JAVASCRIPT:"javascript",PYTHON:"python",SCALA:"scala",SQL:"sql"},gn={SNOWSIGHT:"snowSight",CLASSIC_UI:"classicUI"};Tt.exports={DROP_STATEMENTS:yn,LANGUAGES:dn,FORMATS:gn}});var ut=X((fr,lt)=>{"use strict";var In=require("lodash"),Et={ON_ERROR:"ABORT_STATEMENT",SIZE_LIMIT:null,PURGE:!0,RETURN_FAILED_ONLY:!1,MATCH_BY_COLUMN_NAME:"none",ENFORCE_LENGTH:!0,TRUNCATECOLUMNS:!1,FORCE:!1},Rn=n((r={},i={},t=[])=>t.reduce((c,E)=>In.isEqual(r[E],i[E])?c:!i[E]&&r[E]!==Et[E]?{...c,[E]:Et[E]}:i[E]?{...c,[E]:i[E]}:c,{}),"getDiffCopyOptionsByDefault");lt.exports={getDiffCopyOptionsByDefault:Rn}});var dt=X((Mr,yt)=>{"use strict";var ge=require("lodash"),{getDiffCopyOptionsByDefault:Cn}=ut(),At=["description","DATA_RETENTION_TIME_IN_DAYS","MAX_DATA_EXTENSION_TIME_IN_DAYS"],pt=["targetLag","warehouse","DATA_RETENTION_TIME_IN_DAYS","MAX_DATA_EXTENSION_TIME_IN_DAYS","description"],On=ge.uniq([...At,...pt]),_n=["id"],fn=n((r,i)=>i.some(t=>(r==null?void 0:r.oldField[t])!==(r==null?void 0:r.newField[t])),"checkFieldPropertiesChanged"),$n=n(r=>({udfs:r.UDFs,sequences:r.sequences,fileFormats:r.fileFormats}),"prepareContainerLevelData"),Mn=n((r,i,t)=>{let{schemaName:c,databaseName:E}=Nt(r,i),l=i(r.isCaseSensitive,t(r));return{schemaName:c,databaseName:E,tableName:l}},"getNames"),Nt=n((r,i)=>{var u;let{database:t,isCaseSensitive:c}=((u=r.compMod)==null?void 0:u.bucketProperties)||{},{keyspaceName:E}=r.compMod,l=i(c,E),C=i(c,t);return{schemaName:l,databaseName:C}},"getBaseAndContainerNames"),Ln=n(({collection:r,data:i})=>{let{database:t}=(r==null?void 0:r.role)||{};return i={...i,nameData:{...i.nameData||{},database:t}},{collection:r,data:i}},"prepareContainerName"),Pn=n(({collection:r,data:i})=>{var c,E,l;let t=((c=r==null?void 0:r.role)==null?void 0:c.compMod)||{};return i={...i,nameData:{...i.nameData||{},isExternal:(E=r==null?void 0:r.role)==null?void 0:E.external,database:(l=t==null?void 0:t.bucketProperties)==null?void 0:l.database,schemaName:t==null?void 0:t.keyspaceName}},{collection:r,data:i}},"prepareTableName"),Fn=n((r={})=>{let i=r.code,t=r.name||r.collectionName;return{oldName:(i==null?void 0:i.old)||(t==null?void 0:t.old),newName:(i==null?void 0:i.new)||(t==null?void 0:t.new)}},"setName"),Kn=n(({collection:r,data:i})=>{let{compMod:t,isCaseSensitive:c,name:E,code:l,materialized:C}=(r==null?void 0:r.role)||{},u=Fn(t),v=(u==null?void 0:u.newName)!==(u==null?void 0:u.oldName);return i={...i,nameData:{...i.nameData||{},isCaseSensitive:c,nameIsChanged:v,isMaterialized:C,newName:(u==null?void 0:u.newName)||l||E,oldName:u==null?void 0:u.oldName}},{collection:r,data:i}},"prepareName"),Un=n(({collection:r,data:i})=>{let{compMod:t}=(r==null?void 0:r.role)||{},c=On.reduce((E,l)=>{let{new:C,old:u}=(t==null?void 0:t[l])||{};return u!==C?C&&pt.includes(l)?{...E,set:{...E.set,[l]:C}}:u&&At.includes(l)?{...E,unset:[...E.unset,l]}:E:E},{set:{},unset:[]});return{collection:r,data:{...i,setProperty:c.set,unsetProperty:c.unset}}},"prepareAlterSetUnsetData"),hn=n(({collection:r,data:i})=>{var E,l;let t=(l=(E=r==null?void 0:r.role)==null?void 0:E.compMod)==null?void 0:l.managedAccess,c=t&&(t==null?void 0:t.new)!==(t==null?void 0:t.old);return{collection:r,data:{...i,managedAccess:{isChange:c,value:!!(t!=null&&t.new)}}}},"prepareMenageContainerData"),bn=n(({collection:r,data:i})=>{let t=(r==null?void 0:r.role)||{},c=t.compMod||{},{new:E,old:l}=c.fileFormat||{},{new:C,old:u}=c.customFileFormatName||{};return{collection:r,data:{...i,formatData:{isChangeCustomFileFormat:(C||u)&&C!==u,isChangeType:(E||l)&&E!==l,fileFormat:E||(t==null?void 0:t.fileFormat),formatName:C}}}},"prepareCollectionFileFormat"),St=n((r={},i={})=>{let t=Object.keys(r),c=Object.keys(i);return ge.union(t,c).filter(E=>!_n.includes(E))},"getObjectCommonKeys"),Yn=n(({collection:r,data:i})=>{var C,u;let{new:t={},old:c={}}=((u=(C=r==null?void 0:r.role)==null?void 0:C.compMod)==null?void 0:u.formatTypeOptions)||{},l=St(c,t).some(v=>!ge.isEqual(t[v],c[v]));return{collection:r,data:{...i,formatTypeOptions:{optionsIsChanged:l,typeOptions:t}}}},"prepareCollectionFormatTypeOptions"),vn=n((r,i)=>({collection:t,data:c})=>{var U,A;let{new:E={},old:l={}}=((A=(U=t==null?void 0:t.role)==null?void 0:U.compMod)==null?void 0:A.stageCopyOptions)||{},C=St(l,E),u=C.some(O=>!ge.isEqual(E[O],l[O])),v=Cn(l,E,C);v={...v,sizeLimit:ge.has(v,"SIZE_LIMIT")};let D={optionsIsChanged:u,options:r(i(v))};return{collection:t,data:{...c,stageCopyOptions:D}}},"prepareCollectionStageCopyOptions");yt.exports={checkFieldPropertiesChanged:fn,prepareContainerLevelData:$n,getBaseAndContainerNames:Nt,getNames:Mn,prepareTableName:Pn,prepareContainerName:Ln,prepareName:Kn,prepareAlterSetUnsetData:Un,prepareMenageContainerData:hn,prepareCollectionFileFormat:bn,prepareCollectionFormatTypeOptions:Yn,prepareCollectionStageCopyOptions:vn}});var _e=X((Pr,gt)=>{"use strict";var{FORMATS:xn}=Ge(),Bn=/(\\r|\\n|\\b|\\f|\\t|'|"|\\[0-9]{3}|\0|\\x5C[0-3]?[0-7]{1,2}|\x5C[xX][0-9A-Fa-f]{2}|\x5C[uU][0-9A-Fa-f]{4}|\\)/g,qn=n((r,i)=>r===xn.SNOWSIGHT?`'${i.replace(Bn,"\\$1")}'`:`$$${i}$$`,"escapeString");gt.exports={escapeString:qn}});var Rt=X((Kr,It)=>{"use strict";var Vn=n(({index:r,numberOfStatements:i,lastIndexOfActivatedStatement:t,delimiter:c})=>{let E=r===i-1,l=r===t;return E?"":l?" //"+c:c},"getDelimiter"),Gn=n(({statements:r=[],delimiter:i=",",indent:t=`
`})=>{let c=r.findLastIndex(l=>!l.startsWith("//")),E=r.length;return r.map((l,C)=>{let u=Vn({index:C,numberOfStatements:E,lastIndexOfActivatedStatement:c,delimiter:i});return l+u}).join(t)},"joinActivatedAndDeactivatedStatements");It.exports={joinActivatedAndDeactivatedStatements:Gn}});var Ae=X((hr,Ct)=>{"use strict";var Dn=n(r=>r?` ${r}`:"","preSpace");Ct.exports={preSpace:Dn}});var ft=X((Yr,_t)=>{"use strict";var Ot=n((r="")=>new RegExp("\\$\\{(.*?)}",r),"template"),wn=n(r=>r.match(Ot("gi"))||[],"getAllTemplates"),Hn=n(r=>(r.match(Ot("i"))||[])[1],"parseTemplate"),Xn=n((r,i)=>wn(r).reduce((t,c)=>{let E=Hn(c);return t.replace(c,()=>i[E]||i[E]===0?i[E]:"")},r),"assignTemplates");_t.exports=Xn});var De=X((xr,$t)=>{"use strict";var Wn=require("lodash"),zn=["//"],Zn=n((r,i,t)=>Wn.has(i,"isActivated")&&!i.isActivated?t?"// "+r:r.includes(`
`)?r.split(`
`).filter(Boolean).map(c=>"// "+c).join(`
`).concat(`
`):r?"// "+r:"":r,"commentIfDeactivated"),Qn=n((r="")=>zn.some(i=>r.startsWith(i)),"queryIsDeactivated");$t.exports={commentIfDeactivated:Zn,queryIsDeactivated:Qn}});var Te=X((qr,Mt)=>{"use strict";var Q=require("lodash"),Jn=ft(),{commentIfDeactivated:fe}=De();Mt.exports=r=>{let{checkAllKeysActivated:i}=r.require("@hackolade/ddl-fe-utils").general,t=n(a=>String(a).replace(/'/g,"''").replace(/\\\\/g,"\\").replace(/\\/g,"\\\\"),"escape"),c=n(a=>Q.isUndefined(a)?a:`'${t(a)}'`,"toString"),E=n(a=>Q.toLower(a)==="none","isNone"),l=n(a=>Q.toLower(a)==="auto","isAuto"),C=n(a=>E(a)?a:c(a),"toStringIfNotNone"),u=n(a=>l(a)?a:c(a),"toStringIfNotAuto"),v=n(a=>isNaN(a)?"":Number(a),"toNumber"),D=n(a=>a===!0?"TRUE":void 0,"toBoolean"),U=n(a=>Object.entries(a).filter(([y,R])=>!Q.isEmpty(R)||R!==!1).map(([y,R])=>(Array.isArray(R)&&(R="("+R.filter(M=>!Q.isEmpty(M)).join(", ")+")"),`${y}=${R}`)).join(`
`),"toOptions"),A=n((a,y,R)=>{if(y.GUID===a)return[{...y,name:R}];if(Q.isPlainObject(y.properties)){let M=Object.keys(y.properties).reduce((L,w)=>{if(L.length)return L;let G=A(a,y.properties[w],w);return G?L.concat(G):L},[]);if(M.length)return[{...y,name:R}].concat(M)}else if(Q.isArray(y.items)){let M=y.items.reduce((L,w)=>{if(L.length)return L;let G=A(a,w,"");return G?L.concat(G):L},[]);if(M.length)return[{...y,name:R}].concat(M)}else if(y.items){let M=A(a,y.items,"");if(M)return[{...y,name:R}].concat(M)}},"findJsonSchemaChain"),O=n((a,y,R)=>{let M=Q.get(R,"clusteringKey[0].name",""),L=Q.get(R,"clusteringKey[0].isActivated",!0),w=n(G=>String(G||"").includes("."),"isComplexName");if(R.expression)return{name:Jn(R.expression,{name:F(a,M)}),isActivated:L,isExpression:!0};if(M&&!w(M))return{name:M,isActivated:L};{let G=Q.get(R,"clusteringKey[0].keyId",""),Z=A(G,y);if(Array.isArray(Z)){let oe=Q.get(Z[Z.length-1],"type","").replace(/json/i,"").toLowerCase();return{name:`(${Z.map(ce=>F(a,ce.name)).filter(Boolean).join(":")}::${oe})`,isActivated:L,isExpression:!0}}}},"composeClusteringKey"),h=n((a,y)=>{if(Array.isArray(y)){let R=", ",M=[],L=y.reduce((w,G)=>{let Z=Q.isString(G.name)?G.name.trim():G.trim();return G.isExpression||(Z=F(a,Z)),Q.get(G,"isActivated",!0)?[...w,Z]:(M.push(Z),w)},[]).filter(Boolean);return L.length===0?fe(M.join(R),{isActivated:!1},!0):M.length===0?L.join(R):L.join(R)+fe(R+M.join(R),{isActivated:!1},!0)}return y},"foreignKeysToString"),N=n((a,y)=>y==null?void 0:y.map(R=>F(a,R.name.trim())).join(", "),"foreignActiveKeysToString"),m=n(a=>i(a.foreignKey)&&i(a.primaryKey)&&a.primaryTableActivated&&a.foreignTableActivated,"checkIfForeignKeyActivated"),g=n((a,y)=>{if(!y)return a.map(L=>L.name).join(`,
	`);let R=a.filter(L=>L.isActivated).map(L=>L.name),M=a.filter(L=>!L.isActivated).map(L=>L.name);return R.length===0?fe(M.join(`,
	`),{isActivated:!1},!0):M.length===0?R.join(`,
	`):R.join(`,
	`)+`
	`+fe(M.join(`,
	`),{isActivated:!1},!0)},"viewColumnsToString"),F=n((a,y)=>y&&(a?$(y):S(y)?y:$(y)),"getName"),_=n(a=>a&&(a.code||a.collectionName)||"","getEntityName"),I=n((a,y)=>a?`${a}.${y}`:y,"getFullName"),S=n(a=>/^[a-z_][a-z\d_$]*$/i.test(a),"isValidCaseInsensitiveName"),$=n(a=>/^".*"$/.test(a)?a:`"${a}"`,"addQuotes");return{escape:t,toString:c,isNone:E,isAuto:l,toStringIfNotNone:C,toStringIfNotAuto:u,toNumber:v,toBoolean:D,toOptions:U,composeClusteringKey:O,foreignKeysToString:h,checkIfForeignKeyActivated:m,foreignActiveKeysToString:N,viewColumnsToString:g,getName:F,getEntityName:_,getFullName:I,getDbName:n(a=>Q.get(a,"code")||Q.get(a,"name",""),"getDbName"),addQuotes:$,getGroupItemsByCompMode:n(({newItems:a=[],oldItems:y=[]})=>{let R=a.filter(w=>!y.some(G=>G.id===w.id)),M=[],L=[];return y.forEach(w=>{let G=a.find(Z=>Z.id===w.id);G?Q.isEqual(G,w)||L.push(G):M.push(w)}),{added:R,removed:M,modified:L}},"getGroupItemsByCompMode")}}});var Pt=X((Gr,Lt)=>{"use strict";var ie=require("lodash");Lt.exports=r=>{let{clean:i}=r.require("@hackolade/ddl-fe-utils").general,{addQuotes:t}=Te()(r),c=n((m,g)=>Object.entries(m.properties).map(g),"mapProperties"),E=n(m=>!(m.compositeUniqueKey||!m.unique),"isUniqueKey"),l=n(m=>!(m.compositeUniqueKey||m.compositePrimaryKey||!m.primaryKey),"isPrimaryKey"),C=n((m,g,F,_)=>i({keyType:"UNIQUE",name:m.constraintName,columns:[{name:g,isActivated:F}],include:U(m.include||m.indexInclude||[],_),storageParameters:m.indexStorageParameters,comment:m.indexComment,tablespace:m.indexTablespace}),"hydrateUniqueOptions"),u=n((m,g,F,_)=>i({keyType:"PRIMARY KEY",name:m.constraintName,columns:[{name:g,isActivated:F}],include:U(m.include||m.indexInclude||[],_),storageParameters:m.indexStorageParameters,comment:m.indexComment,tablespace:m.indexTablespace}),"hydratePrimaryKeyOptions"),v=n((m,g)=>Object.keys(g).find(F=>g[F].GUID===m),"findName"),D=n((m,g)=>ie.get(Object.values(g).find(F=>F.GUID===m),"isActivated",!0),"checkIfActivated"),U=n((m,g)=>ie.map(m,F=>({name:v(F.keyId,g.properties),isActivated:D(F.keyId,g.properties)})),"getKeys"),A=n(m=>Array.isArray(m.primaryKey)?m.primaryKey.filter(g=>!ie.isEmpty(g.compositePrimaryKey)).map(g=>({...u(g,null,null,m),columns:U(g.compositePrimaryKey,m)})):[],"getCompositePrimaryKeys"),O=n(m=>Array.isArray(m.uniqueKey)?m.uniqueKey.filter(g=>!ie.isEmpty(g.compositeUniqueKey)).map(g=>({...C(g,null,null,m),columns:U(g.compositeUniqueKey,m)})):[],"getCompositeUniqueKeys");return{getTableKeyConstraints:n(({jsonSchema:m})=>{if(!m.properties)return[];let g=c(m,([_,I])=>{if(l(I)){if(ie.isEmpty(I.primaryKeyOptions))return}else return;return u(ie.first(I.primaryKeyOptions),_,I.isActivated,m)}).filter(Boolean),F=ie.flatten(c(m,([_,I])=>{if(E(I)){if(ie.isEmpty(I.uniqueKeyOptions)||!Array.isArray(I.uniqueKeyOptions))return[]}else return[];return I.uniqueKeyOptions.map(S=>C(S,_,I.isActivated,m))})).filter(Boolean);return[...g,...A(m),...F,...O(m)]},"getTableKeyConstraints"),getClusteringKey:n(({clusteringKey:m,isParentActivated:g})=>{if(!Array.isArray(m)||m.length===0)return"";let F=n(({name:S})=>t(S),"mapName"),_=m.filter(S=>S.isActivated).map(F).join(", "),I=m.filter(S=>!S.isActivated).map(F).join(", ");return g?_.length===0?`// CLUSTER BY (${I})
`:I.length===0?`CLUSTER BY (${_})
`:`CLUSTER BY (${_}) //${I}
`:`CLUSTER BY (${m.map(F).join(", ")})
`},"getClusteringKey")}}});var Kt=X((wr,Ft)=>{"use strict";var{isEmpty:jn,toUpper:kn,trim:we}=require("lodash"),{preSpace:He}=Ae();Ft.exports=r=>{let{tab:i}=r.require("@hackolade/ddl-fe-utils").general,{toOptions:t}=Te()(r),c=n((A,O,h="")=>A!=="custom"?`(
`+i(`TYPE=${A}
${t(O)}`)+`
)`:`(
`+i(`FORMAT_NAME='${h}'`)+`
)`,"getFileFormat"),E=n(A=>jn(A)?"":`STAGE_COPY_OPTIONS = (
`+i(t(A))+`
)`,"getCopyOptions"),l=n((A,O)=>{let h=we(i(A.filter(N=>!!we(N,`	
 `)).join(`
`)),`	
`);return we(O)?h+`
	`+O:h},"addOptions"),C=n(A=>A.TIMESTAMP?`${A.atOrBefore} (timestamp => ${A.TIMESTAMP})`:A.OFFSET?`${A.atOrBefore} (offset => ${A.OFFSET})`:A.STATEMENT?`${A.atOrBefore} (statement => '${A.STATEMENT}')`:"","getAtOrBefore"),u=n(A=>A.map(O=>`"${O.name}"`).join(", "),"mergeKeys");function v({targetLagTimeSpan:A,targetLagAmount:O,targetLagDownstream:h}){return!(A&&O)&&!h?"":`TARGET_LAG = ${h?"DOWNSTREAM":`'${O} ${A}'`}
`}n(v,"getTargetLag");function D(A){let O=n((h,N,m)=>N===m.length-1?`	${h}`:`	${h}
`,"mapStatement");return`AS
${A.split(`
`).map(O).join("")}`}return n(D,"getSelectStatement"),{getFileFormat:c,getCopyOptions:E,addOptions:l,getAtOrBefore:C,mergeKeys:u,getTableExtraProps:n(({tableData:A,tagsStatement:O,clusterKeys:h,comment:N,dataRetentionTime:m,copyGrants:g,columnDefinitions:F})=>{if(!A.tableExtraProps)return{};let{iceberg:_,dynamic:I,transient:S,selectStatement:$,tableExtraProps:{targetLag:f,warehouse:p,refreshMode:a,initialize:y,maxDataExtensionTime:R,externalVolume:M,catalog:L,baseLocation:w,catalogSync:G,storageSerializationPolicy:Z,changeTracking:oe,defaultDdlCollation:ce,catalogTableName:le,catalogNamespace:Ie,metadataFilePath:ue,replaceInvalidCharacters:Se,autoRefresh:Me}}=A;return{targetLag:v(f),warehouse:p?`WAREHOUSE = ${p}
`:"",selectStatement:$?D($):"",externalVolume:M?`EXTERNAL_VOLUME = '${M}'
`:"",catalog:L?`CATALOG = '${L}'
`:"",baseLocation:w?`BASE_LOCATION = '${w}'
`:"",column_definitions:F?`	(
		${F}
	)
`:"",refreshMode:a?`REFRESH_MODE = ${a}
`:"",initialize:y?`INITIALIZE = ${y}
`:"",clusterKeys:h,dataRetentionTime:m?`${m.trim()}
`:"",maxDataExtensionTime:R?`MAX_DATA_EXTENSION_TIME_IN_DAYS = ${R}
`:"",copyGrants:g?`${g.trim()}
`:"",comment:N?`${N.trim()}
`:"",tagsStatement:O?`${O.trim()}
`:"",transient:He(S&&"TRANSIENT"),iceberg:He(_&&"ICEBERG"),dynamic:He(I&&"DYNAMIC"),catalogSync:G?`CATALOG_SYNC = '${G}'
`:"",storageSerializationPolicy:Z?`STORAGE_SERIALIZATION_POLICY = ${kn(Z)}
`:"",changeTracking:oe?`CHANGE_TRACKING = TRUE
`:"",defaultDdlCollation:ce?`DEFAULT_DDL_COLLATION = '${ce}'
`:"",catalogTableName:le?`CATALOG_TABLE_NAME = '${le}'
`:"",catalogNamespace:Ie?`CATALOG_NAMESPACE = '${Ie}'
`:"",metadataFilePath:ue?`METADATA_FILE_PATH = '${ue}'
`:"",replaceInvalidCharacters:Se?`REPLACE_INVALID_CHARACTERS = TRUE
`:"",autoRefresh:Me?`AUTO_REFRESH = TRUE
`:""}},"getTableExtraProps")}}});var bt=X((Xr,ht)=>{"use strict";var er=require("lodash"),Ut=n(r=>Array.isArray(r)?r.filter(i=>i&&i.NULL_IF_item):[],"getNullIf"),tr=n(r=>(i,t)=>{let{toString:c,toStringIfNotNone:E,toStringIfNotAuto:l,toNumber:C,toBoolean:u}=Te()(r);switch(i){case"CSV":return{COMPRESSION:t.COMPRESSION,RECORD_DELIMITER:E(t.RECORD_DELIMITER),FIELD_DELIMITER:E(t.FIELD_DELIMITER),FILE_EXTENSION:E(t.FILE_EXTENSION),SKIP_HEADER:C(t.SKIP_HEADER),DATE_FORMAT:l(t.DATE_FORMAT),TIME_FORMAT:l(t.TIME_FORMAT),TIMESTAMP_FORMAT:l(t.TIMESTAMP_FORMAT),BINARY_FORMAT:t.BINARY_FORMAT,ESCAPE:E(t.ESCAPE),ESCAPE_UNENCLOSED_FIELD:E(t.ESCAPE_UNENCLOSED_FIELD),TRIM_SPACE:u(t.TRIM_SPACE),FIELD_OPTIONALLY_ENCLOSED_BY:E(t.FIELD_OPTIONALLY_ENCLOSED_BY),NULL_IF:er.isEmpty(Ut(t.NULL_IF))?[]:Ut(t.NULL_IF).map(v=>c(v.NULL_IF_item)),ERROR_ON_COLUMN_COUNT_MISMATCH:u(t.ERROR_ON_COLUMN_COUNT_MISMATCH),VALIDATE_UTF8:u(t.VALIDATE_UTF8),EMPTY_FIELD_AS_NULL:u(t.EMPTY_FIELD_AS_NULL),SKIP_BYTE_ORDER_MARK:u(t.SKIP_BYTE_ORDER_MARK),ENCODING:c(t.ENCODING)};case"JSON":return{COMPRESSION:t.COMPRESSION,FILE_EXTENSION:E(t.FILE_EXTENSION),ENABLE_OCTAL:u(t.ENABLE_OCTAL),ALLOW_DUPLICATE:u(t.ALLOW_DUPLICATE),STRIP_OUTER_ARRAY:u(t.STRIP_OUTER_ARRAY),STRIP_NULL_VALUES:u(t.STRIP_NULL_VALUES),IGNORE_UTF8_ERRORS:u(t.IGNORE_UTF8_ERRORS),SKIP_BYTE_ORDER_MARK:u(t.SKIP_BYTE_ORDER_MARK)};case"AVRO":return{COMPRESSION:t.COMPRESSION};case"PARQUET":return{COMPRESSION:t.SNAPPY_COMPRESSION?void 0:t.COMPRESSION,SNAPPY_COMPRESSION:t.SNAPPY_COMPRESSION?u(t.SNAPPY_COMPRESSION):void 0,BINARY_AS_TEXT:u(t.BINARY_AS_TEXT)};case"XML":return{COMPRESSION:t.COMPRESSION,IGNORE_UTF8_ERRORS:u(t.IGNORE_UTF8_ERRORS),PRESERVE_SPACE:u(t.PRESERVE_SPACE),STRIP_OUTER_ELEMENT:u(t.STRIP_OUTER_ELEMENT),DISABLE_SNOWFLAKE_DATA:u(t.DISABLE_SNOWFLAKE_DATA),DISABLE_AUTO_CONVERT:u(t.DISABLE_AUTO_CONVERT),SKIP_BYTE_ORDER_MARK:u(t.SKIP_BYTE_ORDER_MARK)};default:return{}}},"getFormatTypeOptions");ht.exports=tr});var vt=X((zr,Yt)=>{"use strict";Yt.exports=r=>{let{toNumber:i,toBoolean:t}=Te()(r),c=n(l=>l.ON_ERROR==="SKIP_FILE_<num>"?`SKIP_FILE_${l.skipFileNum}`:l.ON_ERROR==="SKIP_FILE_<num>%"?`SKIP_FILE_${l.skipFileNumPct}%`:l.ON_ERROR,"getOnError");return{getStageCopyOptions:n(l=>({ON_ERROR:c(l),SIZE_LIMIT:l.sizeLimit?i(l.SIZE_LIMIT):void 0,PURGE:t(l.PURGE),MATCH_BY_COLUMN_NAME:l.MATCH_BY_COLUMN_NAME,ENFORCE_LENGTH:t(l.ENFORCE_LENGTH),RETURN_FAILED_ONLY:t(l.RETURN_FAILED_ONLY),TRUNCATECOLUMNS:t(l.TRUNCATECOLUMNS),LOAD_UNCERTAIN_FILES:l.LOAD_UNCERTAIN_FILES?t(l.LOAD_UNCERTAIN_FILES):void 0,FORCE:t(l.FORCE)}),"getStageCopyOptions")}}});var qt=X((Qr,Bt)=>{"use strict";var nr=Ve(),J=require("lodash"),{escapeString:xt}=_e(),{preSpace:Xe}=Ae();Bt.exports=r=>{let i=r.require("@hackolade/ddl-fe-utils").assignTemplates,t=n((N,m)=>{N=J.toUpper(N);let g=N;return l(N)&&m.timePrecision&&!J.isNaN(m.timePrecision)&&(g=`${N}(${m.timePrecision})`),["VARCHAR","STRING","TEXT","CHAR","CHARACTER"].includes(N)&&m.length&&!J.isNaN(m.length)&&(g=`${N}(${m.length})`),["NUMBER","DECIMAL","NUMERIC"].includes(N)&&!J.isNaN(m.scale)&&!J.isNaN(m.precision)&&(g=`${N}(${Number(m.precision)},${Number(m.scale)})`),g},"decorateType"),c=n(N=>["VARCHAR","STRING","TEXT","CHAR","CHARACTER"].includes(J.toUpper(N)),"isString"),E=n(N=>["NUMBER","DECIMAL","NUMERIC","INT","INTEGER","BIGINT","BYTEINT","TINYINT","SMALLINT","REAL","FLOAT","FLOAT4","FLOAT8","DOUBLE","DOUBLE PRECISION"].includes(J.toUpper(N)),"isNumber"),l=n(N=>["TIME","TIMESTAMP_NTZ","TIMESTAMP_TZ","TIMESTAMP_LTZ","TIMESTAMP","TIMESTAMPNTZ","TIMESTAMPTZ","TIMESTAMPLTZ","DATETIME"].includes(J.toUpper(N)),"isTimestamp"),C=n(N=>N.replace(/^'([\S\s]+)'$/,"$1"),"localEscapeString"),u=n(({type:N,defaultValue:m,scriptFormat:g})=>c(N)?xt(g,C(String(m))):J.toUpper(N)==="BOOLEAN"?J.toUpper(m):m,"getDefault"),v=n((N,m,g)=>{if(!g||!E(N))return"";let F=` ${m}`;return F+=!J.isNaN(g.step)&&(g.start||g.start===0)?" START "+g.start:"",F+=!J.isNaN(g.step)&&g.step?" INCREMENT "+g.step:"",F},"getAutoIncrement"),D=n((N,m)=>!c(N)||J.isEmpty(m)?"":" COLLATE '"+Object.entries(m).map(([g,F])=>F).join("-")+"'","getCollation"),U=n(N=>Xe(N.unique&&!N.compositeUniqueKey&&"UNIQUE"),"getUnique"),A=n(N=>!N.primaryKey||N.compositePrimaryKey?"":Xe("PRIMARY KEY"),"getPrimaryKey");return{decorateType:t,getDefault:u,getAutoIncrement:v,getCollation:D,getInlineConstraint:n(N=>A(N)+U(N),"getInlineConstraint"),createExternalColumn:n(N=>({statement:i(nr.externalColumnDefinition,{name:N.name,type:t(N.type,N),expression:N.expression?`(${N.expression})`:`(value:${N.name}::${N.type})`,comment:Xe(N.comment&&`COMMENT ${xt(N.comment)}`)}),isActivated:N.isActivated}),"createExternalColumn")}}});var Gt=X((jr,Vt)=>{"use strict";Vt.exports=r=>{let{foreignKeysToString:i,foreignActiveKeysToString:t,getName:c}=Te()(r);return{generateConstraint:n(({name:l,keys:C,keyType:u,isParentActivated:v,isCaseSensitive:D})=>{let U=C.map(h=>({...h,name:`${c(D,h.name)}`})),A=U.some(h=>h.isActivated),O=t(D,U);return A&&v&&(O=i(D,U)),{statement:(l!=="undefined"?`CONSTRAINT ${c(D,l)} `:"")+`${u} (${O})`,isActivated:A}},"generateConstraint")}}});var wt=X((ea,Dt)=>{"use strict";var $e=require("lodash"),{escapeString:rr}=_e(),{preSpace:ar}=Ae();Dt.exports=({getName:r,getFullName:i,templates:t,assignTemplates:c,tab:E})=>{let l=n((_,I,S)=>{let $=r(S,I),f=r(S,_);return i(f,$)},"getSchemaFullName"),C=n(({database:_,isCaseSensitive:I,newName:S}={})=>{let $=l(_,S,I);return c(t.alterSchemaScript,{name:$})},"getAlterSchemaScript"),u=n((_,{dynamic:I,database:S,isCaseSensitive:$,newName:f,schemaName:p}={})=>{let a=l(S,p,$),y=r($,f),R=i(a,y);return c(_,{dynamic:ar(I&&"DYNAMIC"),name:R})},"getAlterEntityScript"),v=n(({script:_,data:I})=>{let{nameData:S}=I,{database:$,isCaseSensitive:f,oldName:p,nameIsChanged:a,newName:y}=S,R=l($,p,f),M=l($,y,f);if(a){let L=c(t.alterSchemaScript,{name:R});_=[..._,L+c(t.alterEntityRename,{name:M})]}return{script:_,data:I}},"getAlterSchemaName"),D={description:"COMMENT",targetLag:"TARGET_LAG",warehouse:"WAREHOUSE",DATA_RETENTION_TIME_IN_DAYS:"DATA_RETENTION_TIME_IN_DAYS",MAX_DATA_EXTENSION_TIME_IN_DAYS:"MAX_DATA_EXTENSION_TIME_IN_DAYS"},U=n(({key:_,propValue:I,data:S},$)=>{if(_==="description"){let f=$e.get(S,"options.targetScriptOptions.keyword");return rr(f,I)}else if(_==="targetLag"){let{targetLagAmount:f,targetLagTimeSpan:p,targetLagDownstream:a}=S[$].targetLag??{};return a?"DOWNSTREAM":`'${f} ${p}'`}return I},"getValue");return{getAlterSchemaName:v,getSetCollectionProperty:n(_=>({script:I,data:S})=>{let{setProperty:$,nameData:f}=S;if(f!=null&&f.isExternal)return{script:I,data:S};let p=Object.keys($).map((a,y)=>{let R=$[a],M=U({key:a,data:S,propValue:R},"setProperty"),L=`${D[a]} = ${M}`;return y?E(L):L});if(!$e.isEmpty(p)){let a=_+c(t.setPropertySchema,{property:p.join(`
`)});I=[...I,a]}return{script:I,data:S}},"getSetCollectionProperty"),getUnsetCollectionProperty:n(_=>({script:I,data:S})=>{let{unsetProperty:$,nameData:f}=S;if(f!=null&&f.isExternal)return{script:I,data:S};let p=$.map((a,y)=>(a=D[a],`${a}`));if(!$e.isEmpty(p)){let a=_+c(t.unsetPropertySchema,{property:p.join(`
`)});I=[...I,a]}return{script:I,data:S}},"getUnsetCollectionProperty"),getSchemaMenageAccess:n(_=>({script:I,data:S})=>{let{managedAccess:$}=S;if($.isChange){let f=$.value?"ENABLE":"DISABLE";I=[...I,_+c(t.manageAccessSchema,{access:f})]}return{script:I,data:S}},"getSchemaMenageAccess"),getAlterSchemaScript:C,getAlterTableFormat:n((_,I)=>({script:S,data:$})=>{let{formatData:f,formatTypeOptions:p,nameData:a}=$;if(a.isExternal)return{script:S,data:$};let y=f.fileFormat,R=f.formatName,M=p.optionsIsChanged||f.isChangeType?p.typeOptions:{};if(f.isChangeType&&!f.fileFormat&&(y="CSV",M={}),y==="custom"&&!R)return{script:S,data:$};if(f.isChangeType||f.isChangeCustomFileFormat||p.optionsIsChanged){let L="STAGE_FILE_FORMAT = "+I(y,M||{},R);S=[...S,_+c(t.setPropertyTable,{property:L})]}return{script:S,data:$}},"getAlterTableFormat"),getAlterEntityScript:u,getAlterEntityRename:n((_,I)=>({script:S,data:$})=>{let{nameData:f}=$,{database:p,isCaseSensitive:a,oldName:y,nameIsChanged:R,newName:M,schemaName:L}=f,w=l(p,L,a),G=i(w,r(a,y)),Z=i(w,r(a,M));if(R&&!f.isExternal){let oe=c(_,{name:G});S=[...S,oe+c(I,{name:Z})]}return{script:S,data:$}},"getAlterEntityRename"),getAlterTableStageCopyOptions:n((_,I)=>({script:S,data:$})=>{let{stageCopyOptions:f,nameData:p}=$;if(f.optionsIsChanged&&!$e.isEmpty(f.options)&&!(p!=null&&p.isExternal)){let a=I(f.options);S=[...S,_+c(t.setPropertyTable,{property:a})]}return{data:$,script:S}},"getAlterTableStageCopyOptions"),getAlterObjectTagsScript:n(_=>({script:I,data:S})=>{let $={tagsToSet:t.setPropertySchema,tagsToUnset:t.unsetPropertySchema};return Object.entries($).reduce((f,[p,a])=>{var M;let y=(M=f.data.tags)==null?void 0:M[p];if(!y)return f;let R=_+c(a,{property:y});return{...f,script:[...f.script,R]}},{script:I,data:S})},"getAlterObjectTagsScript")}}});var zt=X((na,Wt)=>{"use strict";var{differenceBy:sr,some:Ht,partition:Xt,isEmpty:pe}=require("lodash"),{preSpace:ir}=Ae();Wt.exports=({getName:r,toString:i})=>{let t=n(({tags:U,isCaseSensitive:A,indent:O=" "})=>{if(D({tags:U}))return"";let h=E({tags:U,isCaseSensitive:A});return pe(h)?"":`${O}WITH TAG ( ${h} )`},"getTagStatement"),c=n(({allowedValues:U=[]})=>{let A=U.filter(({value:O})=>O).map(({value:O})=>i(O)).join(", ");return ir(!pe(A)&&`ALLOWED_VALUES ${A}`)},"getTagAllowedValues"),E=n(({tags:U,isCaseSensitive:A})=>U.filter(O=>O.tagName&&O.tagValue).map(O=>`${l({tagName:O.tagName,isCaseSensitive:A})} = ${i(O.tagValue)}`).join(", "),"getTagKeyValues"),l=n(({tagName:U,isCaseSensitive:A})=>U.split(".").map(O=>r(A||/\s/.test(O),O)).join("."),"getTagName"),C=n(({tags:U=[],oldTags:A=[],isCaseSensitive:O=!1})=>{let[h,N]=Xt(U,({tagName:F})=>!Ht(A,{tagName:F})),m=sr(N,A,({tagName:F,tagValue:_})=>F&&_);return pe(h)&&pe(m)?"":`TAG ${E({tags:[...h,...m],isCaseSensitive:O})}`},"getSetTagValue"),u=n(({tags:U=[],oldTags:A=[],isCaseSensitive:O=!1})=>{let[h]=Xt(A,({tagName:m})=>!Ht(U,{tagName:m}));return pe(h)?"":`TAG ${h.map(({tagName:m})=>l({tagName:m,isCaseSensitive:O})).join(", ")}`},"getUnsetTagValue"),v=n(U=>({collection:A,data:O})=>{var I,S,$;let h=(I=A==null?void 0:A.role)==null?void 0:I.isCaseSensitive,N=(($=(S=A==null?void 0:A.role)==null?void 0:S.compMod)==null?void 0:$[U])??{},{new:m,old:g}=N,F=C({tags:m,oldTags:g,isCaseSensitive:h}),_=u({tags:m,oldTags:g,isCaseSensitive:h});return{collection:A,data:{...O,tags:{tagsToSet:F,tagsToUnset:_}}}},"prepareObjectTagsData"),D=n(({tags:U})=>pe(U)||U.every(A=>!A.tagName),"isEmptyTags");return{getTagStatement:t,getTagAllowedValues:c,getTagKeyValues:E,prepareObjectTagsData:v,getSetTagValue:C,getUnsetTagValue:u,isEmptyTags:D}}});var{differenceBy:Zt,flatMap:Qt,flow:Ne,get:ne,isEmpty:ae,isPlainObject:or,isUndefined:cr,head:We,omit:mr,toUpper:Tr,trim:Jt,uniqBy:jt}=require("lodash"),Er=it(),kt=ct(),q=Ve(),{LANGUAGES:en,FORMATS:lr}=Ge(),{prepareAlterSetUnsetData:ze,prepareContainerName:ur,prepareMenageContainerData:Ar,prepareName:Ze,prepareTableName:tn,prepareCollectionFileFormat:pr,prepareCollectionFormatTypeOptions:Nr,prepareCollectionStageCopyOptions:Sr}=dt(),{escapeString:Ee}=_e(),{joinActivatedAndDeactivatedStatements:yr}=Rt(),{preSpace:V}=Ae(),dr=1,gr=1;module.exports=(r,i,t)=>{var tt;let c=t.require("@hackolade/ddl-fe-utils").assignTemplates,{tab:E,hasType:l,clean:C}=t.require("@hackolade/ddl-fe-utils").general,u=((tt=i==null?void 0:i.targetScriptOptions)==null?void 0:tt.keyword)||lr.SNOWSIGHT,v=Pt()(t),{getFileFormat:D,getCopyOptions:U,addOptions:A,getAtOrBefore:O,mergeKeys:h,getTableExtraProps:N}=Kt()(t),m=bt()(t),{getStageCopyOptions:g}=vt()(t),{toString:F,toBoolean:_,composeClusteringKey:I,foreignKeysToString:S,checkIfForeignKeyActivated:$,foreignActiveKeysToString:f,getName:p,getFullName:a,getDbName:y,viewColumnsToString:R}=Te()(t),{decorateType:M,getDefault:L,getAutoIncrement:w,getCollation:G,getInlineConstraint:Z,createExternalColumn:oe}=qt()(t),{generateConstraint:ce}=Gt()(t),{commentIfDeactivated:le}=De(),{getAlterSchemaName:Ie,getSetCollectionProperty:ue,getUnsetCollectionProperty:Se,getSchemaMenageAccess:Me,getAlterSchemaScript:nn,getAlterEntityRename:Qe,getAlterTableFormat:rn,getAlterTableStageCopyOptions:an,getAlterEntityScript:Je,getAlterObjectTagsScript:Le}=wt()({getName:p,getFullName:a,templates:q,assignTemplates:c,tab:E}),{getTagStatement:Pe,getTagAllowedValues:Fe,getTagKeyValues:sn,prepareObjectTagsData:Ke,isEmptyTags:on}=zt()({getName:p,toString:F}),je=n((e,o=[],d=[],s=[])=>{let x=[...o,...d,...s].map(b=>e?le(b.statement,b):b.statement);return ae(x)?"":`,
		`+x.join(`,
		`)},"getOutOfLineConstraints");function cn(e){return e=e.replace(/^(\$\$|')/,o=>o+`
`),e=e.replace(/(\$\$|')$/,o=>`
	`+o),e}n(cn,"insertNewlinesAtEdges");let Ue=n(e=>V(e&&"OR REPLACE"),"getOrReplaceStatement"),ke=n(e=>e?`
	${cn(Ee(u,e))}`:"","getBodyStatement"),he=n(e=>e?`
	COMMENT = '${e}'`:"","getCommentsStatement"),et=n(e=>e?`
	NOT NULL`:"","getNotNullStatement"),mn=n(e=>V(e&&"IF NOT EXISTS"),"getIfNotExistStatement");return{createSchema({schemaName:e,databaseName:o,transient:d,managedAccess:s,dataRetention:x,comment:b,udfs:H,procedures:T,sequences:j,fileFormats:k,stages:W,isCaseSensitive:B,tags:me,schemaTags:re}){let se=V(d&&"TRANSIENT"),ee=!isNaN(x)&&x?`
	DATA_RETENTION_TIME_IN_DAYS=${x}`:"",P=s?`
	WITH MANAGED ACCESS`:"",Y=b?`
	COMMENT=${Ee(u,b)}`:"",z=p(B,e),te=p(B,o),Re=a(te,z),be=c(q.createSchema,{name:Re,transient:se,managed_access:P,data_retention:ee,comment:Y}),Ye=n(K=>K.map(({packageName:ye})=>`'${ye}'`).join(", "),"joinPackages"),nt=n(K=>{if(!K)return;let{language:ye,runtimeVersion:Ce,handler:Oe,packages:de}=K;if([en.SQL,en.JAVASCRIPT].includes(ye))return;let xe=Ce?`
	RUNTIME_VERSION = '${Ce}'`:"",Be=Oe?`
	HANDLER = '${Oe}'`:"",qe=de?`
	PACKAGES = (${Ye(de)})`:"";return`${xe}${Be}${qe}`},"getParameters"),Tn=H.map(K=>c(q.createUDF,{name:a(z,p(B,K.name)),arguments:(K.arguments||"").replace(/^\(([\s\S]+)\)$/,"$1"),returnType:K.returnType,language:K.language,body:ke(K.function),comment:he(K.comment),orReplace:Ue(K.orReplace),parameters:nt(K),notNull:et(K.notNull)})),En=T.map(({name:K,orReplace:ye,args:Ce,returnType:Oe,language:de,runtimeVersion:at,packages:xe,handler:Be,body:qe,description:pn,notNull:Nn})=>c(q.createProcedure,{orReplace:Ue(ye),name:a(z,p(B,K)),arguments:(Ce||"").replace(/^\(([\s\S]+)\)$/,"$1"),returnType:Oe,language:de,parameters:nt({language:de,runtimeVersion:at,handler:Be,packages:xe}),comment:he(pn),body:ke(qe),notNull:et(Nn)})),ln=j.map(K=>c(q.createSequence,{name:a(z,p(B,K.name)),start:K.start,increment:K.increment,comment:K.comment})),un=k.map(K=>c(q.createFileFormat,{name:a(z,p(B,K.name)),options:D(K.type,K.formatTypeOptions).slice(1,-1),comment:K.comment})),An=W.map(K=>c(q.createStage,{name:a(z,p(B,K.name)),temporary:V(K.temporary&&"TEMPORARY"),url:K.url?`
	URL=${K.url}`:"",storageIntegration:K.storageIntegration?`
	STORAGE_INTEGRATION=${K.storageIntegration}`:"",credentials:K.credentials?`
	CREDENTIALS=(${K.credentials})`:"",encryption:K.encryption?`
	ENCRYPTION=(${K.encryption})`:""})),rt=me.map(K=>this.createTag({tag:K,schemaName:z,isCaseSensitive:B}));if(!on({tags:re})){let K=c(q.alterSchema,{name:Re,operation:"SET TAG",options:sn({tags:re,isCaseSensitive:B})});rt.push(K)}let ve=[];return o&&ve.push(c(q.createDatabase,{name:p(B,o)})),ve.push(be),[...ve,...Tn,...En,...ln,...un,...An,...rt].join(`
`)},hydrateJsonSchemaColumn(e,o){return e.type==="variant"?mr(e,["subtype","mode"]):e},createTable(e,o){let d=ne(e,"schemaData.schemaName"),s=V(e.temporary&&"TEMPORARY"),x=V(e.transient&&!e.temporary&&"TRANSIENT"),b=V(e.orReplace&&"OR REPLACE"),H=V(e.tableIfNotExists&&"IF NOT EXISTS"),T=V(!ae(e.clusteringKey)&&"CLUSTER BY ("+(o?S(e.isCaseSensitive,e.clusteringKey):f(e.isCaseSensitive,e.clusteringKey))+")"),j=V(!ae(e.partitioningKey)&&"PARTITION BY ("+(o?S(e.isCaseSensitive,e.partitioningKey.map(te=>({name:`${p(e.isCaseSensitive,te.name)}`,isActivated:te.isActivated}))):h(e.partitioningKey))+")"),k=V(e.comment&&`COMMENT=${Ee(u,e.comment)}`),W=V(e.copyGrants&&"COPY GRANTS"),B=V(e.dataRetentionTime&&`DATA_RETENTION_TIME_IN_DAYS=${e.dataRetentionTime}`),me=e.fileFormat?E("STAGE_FILE_FORMAT = "+D(e.fileFormat,e.formatTypeOptions,e.formatName)," "):"",re=e.fileFormat?E("FILE_FORMAT = "+D(e.fileFormat,e.formatTypeOptions,e.formatName)," "):"",se=E(U(e.copyOptions)," "),ee=E(O(e.cloneParams)," "),P=e.columns.map(te=>le(te.statement,te)),Y=yr({statements:P,indent:`
		`}),z=Pe({tags:e.tableTags,isCaseSensitive:e.isCaseSensitive});if(e.dynamic||e.iceberg){let te=N({tableData:e,tagsStatement:z,clusterKeys:T,comment:k,dataRetentionTime:B,copyGrants:W,columnDefinitions:Y});return c(q.createDynamicTable,{orReplace:b,tableIfNotExists:H,name:e.fullName,transient:x,...te})}else{if(e.selectStatement)return c(q.createAsSelect,{name:e.fullName,selectStatement:e.selectStatement,tableOptions:A([T,W,z])});if(e.cloneTableName)return c(q.createCloneTable,{name:e.fullName,source_table:a(d,e.cloneTableName),tableOptions:A([ee,W,z])});if(e.likeTableName)return c(q.createLikeTable,{name:e.fullName,source_table:a(d,e.likeTableName),tableOptions:A([T,W,z])});if(e.external){let te=V(e.externalOptions.location&&"WITH LOCATION="+e.externalOptions.location),Re=V(e.externalOptions.REFRESH_ON_CREATE&&"REFRESH_ON_CREATE="+e.externalOptions.REFRESH_ON_CREATE),be=V(e.externalOptions.AUTO_REFRESH&&"AUTO_REFRESH="+e.externalOptions.AUTO_REFRESH),Ye=V(e.externalOptions.PATTERN&&"PATTERN="+e.externalOptions.PATTERN);return c(q.createExternalTable,{name:e.fullName,tableOptions:A([j,re,te,Re,be,Ye,W,z],k),orReplace:b,tableIfNotExists:H,column_definitions:Y,out_of_line_constraints:je(o,e.foreignKeyConstraints,e.compositePrimaryKeys,e.compositeUniqueKeys)})}}return c(q.createTable,{name:e.fullName,temporary:s,transient:x,tableIfNotExists:H,orReplace:b,tableOptions:A([T,me,se,B,W,z],k),column_definitions:Y,out_of_line_constraints:je(o,e.foreignKeyConstraints,e.compositePrimaryKeys,e.compositeUniqueKeys)})},convertColumnDefinition(e){return{statement:c(q.columnDefinition,{name:e.name,type:M(e.type,e),collation:G(e.type,e.collation),default:V(!cr(e.default)&&"DEFAULT "+L({scriptFormat:u,type:e.type,defaultValue:e.default})),autoincrement:w(e.type,"AUTOINCREMENT",e.autoincrement),identity:w(e.type,"IDENTITY",e.identity),not_nul:V(!e.nullable&&"NOT NULL"),inline_constraint:Z(e),comment:V(e.comment&&`COMMENT ${Ee(u,e.comment)}`),tag:Pe({tags:e.columnTags,isCaseSensitive:e.isCaseSensitive})}),isActivated:e.isActivated}},createForeignKeyConstraint(e,o,d){let s=$(e),x=s?S(e.foreignTableIsCaseSensitive,e.foreignKey):f(e.foreignTableIsCaseSensitive,e.foreignKey),b=s?S(e.primaryTableIsCaseSensitive,e.primaryKey):f(e.primaryTableIsCaseSensitive,e.primaryKey);return{statement:c(q.createTableForeignKey,{constraint:e.name?`CONSTRAINT ${p(d.isCaseSensitive,e.name)} `:"",columns:x,primary_table:a(p(d.isCaseSensitive,e.primarySchemaName||d.schemaName),p(e.primaryTableIsCaseSensitive,e.primaryTable)),primary_columns:b}),isActivated:s}},createForeignKey(e,o,d){let s=$(e),x=s?S(e.foreignTableIsCaseSensitive,e.foreignKey):f(e.foreignTableIsCaseSensitive,e.foreignKey),b=s?S(e.primaryTableIsCaseSensitive,e.primaryKey):f(e.primaryTableIsCaseSensitive,e.primaryKey);return{statement:c(q.alterTableForeignKey,{constraint:e.name?`CONSTRAINT ${p(d.isCaseSensitive,e.name)} `:"",table_name:a(e.foreignSchemaName,p(e.foreignTableIsCaseSensitive,e.foreignTable)),columns:x,primary_table:a(e.primarySchemaName,p(e.primaryTableIsCaseSensitive,e.primaryTable)),primary_columns:b}),isActivated:s}},createView(e,o,d){let s=ne(e,"schemaData.schemaName"),{columnList:x,tableColumns:b,tables:H}=e.keys.reduce((W,B)=>(W.columnList.push({name:`${p(e.isCaseSensitive,B.alias||B.name)}`,isActivated:B.isActivated}),W.tableColumns.push({name:`${p(e.isCaseSensitive,B.entityName)}.${p(e.isCaseSensitive,B.name)}`,isActivated:B.isActivated}),B.entityName&&!W.tables.includes(B.entityName)&&W.tables.push(a(B.dbName,B.entityName)),W),{columnList:[],tableColumns:[],tables:[]});if(ae(H)&&!e.selectStatement)return"";let T=e.selectStatement||`SELECT 
	${R(b,d)}
FROM ${H.join(" INNER JOIN ")}`,j=Pe({tags:e.viewTags,isCaseSensitive:e.isCaseSensitive,indent:""}),k=e.materialized?v.getClusteringKey({clusteringKey:e.clusteringKey,isParentActivated:d}):void 0;return c(q.createView,{secure:V(e.secure&&"SECURE"),materialized:V(e.materialized&&"MATERIALIZED"),name:a(s,e.name),column_list:R(x,d),copy_grants:e.copyGrants?`COPY GRANTS
`:"",comment:e.comment?`COMMENT=${Ee(u,e.comment)}
`:"",select_statement:T,tag:j?j+`
`:"",clustering:k})},getDefaultType(e){return Er[e]},getTypesDescriptors(){return kt},hasType(e){return l(kt,e)},hydrateColumn({columnDefinition:e,jsonSchema:o,dbData:d}){return{...e,name:p(o.isCaseSensitive,e.name),isCaseSensitive:o.isCaseSensitive,timePrecision:Number(o.tPrecision),autoincrement:o.defaultOption==="Autoincrement"&&o.autoincrement?{start:ne(o,"autoincrement.start_num"),step:ne(o,"autoincrement.step_num")}:!1,identity:o.defaultOption==="Identity"&&o.identity?{start:ne(o,"identity.start_num"),step:ne(o,"identity.step_num")}:!1,collation:o.collate?C({locale:o.locale,caseSensitivity:o.caseSensitivity,accentSensitivity:o.accentSensitivity,punctuationSensitivity:o.punctuationSensitivity,firstLetterPreference:o.firstLetterPreference,caseConversion:o.caseConversion,spaceTrimming:o.spaceTrimming}):{},comment:o.refDescription||o.description,unique:o.uniqueKeyConstraintName?!1:o.unique,primaryKeyConstraintName:o.primaryKeyConstraintName,compositePrimaryKey:o.compositePrimaryKey||o.primaryKeyConstraintName&&o.primaryKey,compositeUniqueKey:o.compositeUniqueKey||o.uniqueKeyConstraintName&&o.unique,uniqueKeyConstraintName:o.uniqueKeyConstraintName,primaryKey:o.primaryKeyConstraintName?!1:e.primaryKey,expression:o.expression,columnTags:o.columnTags??[]}},hydrateSchema(e,{udfs:o,procedures:d,sequences:s,fileFormats:x,stages:b,tags:H}={}){return{schemaName:p(e.isCaseSensitive,e.name),isCaseSensitive:e.isCaseSensitive,databaseName:e.database,comment:e.description,transient:e.transient,managedAccess:e.managedAccess,dataRetention:e.DATA_RETENTION_TIME_IN_DAYS,schemaTags:e.schemaTags,udfs:Array.isArray(o)?o.map(T=>C({name:T.name||void 0,orReplace:T.functionOrReplace||void 0,language:T.functionLanguage||T.storedProcLanguage||void 0,runtimeVersion:T.functionRuntimeVersion||void 0,packages:T.functionPackages||void 0,arguments:T.functionArguments||T.storedProcArgument||void 0,returnType:T.functionReturnType||T.storedProcDataType||void 0,notNull:T.functionNotNull||void 0,handler:T.functionHandler||void 0,function:T.functionBody||T.storedProcFunction?E(Jt(T.functionBody||T.storedProcFunction)):void 0,comment:T.functionDescription||T.storedProcDescription?`${T.functionDescription||T.storedProcDescription}`:""})).filter(T=>T.name&&T.language&&T.returnType&&T.function):[],procedures:Array.isArray(d)?d.map(T=>C({name:T.name||void 0,orReplace:T.orReplace||void 0,args:T.inputArgs||void 0,returnType:T.returnType||void 0,notNull:T.notNull||void 0,language:T.language||void 0,runtimeVersion:T.runtimeVersion||void 0,packages:T.packages||void 0,handler:T.handler||void 0,body:T.body?E(Jt(T.body)):void 0,description:T.description||void 0})).filter(T=>T.name):[],sequences:Array.isArray(s)?s.map(T=>C({name:T.name||void 0,start:T.sequenceStart||dr,increment:T.sequenceIncrement||gr,comment:V(T.sequenceComments&&`COMMENT=${Ee(u,T.sequenceComments)}`)})).filter(T=>T.name):[],fileFormats:Array.isArray(x)?x.map(T=>C({name:T.name||void 0,type:T.fileFormat,formatTypeOptions:C(m(T.fileFormat,T.formatTypeOptions)),comment:V(T.fileFormatComments&&`COMMENT=${Ee(u,T.fileFormatComments)}`)})).filter(T=>T.name):[],stages:Array.isArray(b)?b.map(T=>C({name:T.name||void 0,temporary:T.temporary,url:T.url,storageIntegration:T.storageIntegration,credentials:T.credentials,encryption:T.encryption})).filter(T=>T.name):[],tags:Array.isArray(H)?H.map(T=>C({name:T.name||void 0,orReplace:T.orReplace||void 0,ifNotExist:T.ifNotExist||void 0,allowedValues:T.allowedValues||void 0,description:T.description||void 0})).filter(T=>T.name):[]}},hydrateTable({tableData:e,entityData:o,jsonSchema:d}){let s=We(o)??{},x=p(s.isCaseSensitive,ne(e,"schemaData.schemaName")),b=p(s.isCaseSensitive,ne(e,"schemaData.databaseName")),H=p(s.isCaseSensitive,e.name),T=a(b,a(x,H)),j=s.external?s.externalFileFormat:s.fileFormat,k=n(P=>P.namespace?P.namespace+P.path:P.path,"getLocation"),W=v.getTableKeyConstraints({jsonSchema:d}),B=n((P,Y)=>({...P,[Y.name]:Y.columns.map(z=>({name:z.name,isActivated:z.isActivated}))}),"entityLevelCompositeKeysReducer"),me=W.filter(({keyType:P})=>P==="PRIMARY KEY").reduce(B,{}),re=W.filter(({keyType:P})=>P==="UNIQUE").reduce(B,{}),se=e.columnDefinitions.filter(P=>P.compositePrimaryKey).reduce((P,Y)=>Y.primaryKeyConstraintName?{...P,[Y.primaryKeyConstraintName]:Array.isArray(P[Y.primaryKeyConstraintName])?jt([...P[Y.primaryKeyConstraintName],{name:Y.name,isActivated:Y.isActivated}],"name"):[{name:Y.name,isActivated:Y.isActivated}]}:P,me),ee=e.columnDefinitions.filter(P=>P.compositeUniqueKey).reduce((P,Y)=>Y.uniqueKeyConstraintName?{...P,[Y.uniqueKeyConstraintName]:Array.isArray(P[Y.uniqueKeyConstraintName])?jt([...P[Y.uniqueKeyConstraintName],{name:Y.name,isActivated:Y.isActivated}],"name"):[{name:Y.name,isActivated:Y.isActivated}]}:P,re);return{...e,fullName:T,name:H,temporary:s.temporary,transient:s.transient,external:s.external,dynamic:s.dynamic,iceberg:s.iceberg,orReplace:s.orReplace,tableIfNotExists:s.tableIfNotExists,tableExtraProps:{warehouse:s.warehouse,targetLag:s.targetLag,refreshMode:s.refreshMode,initialize:s.initialize,query:s.query,externalVolume:s.externalVolume,baseLocation:s.baseLocation,maxDataExtensionTime:isNaN(s.MAX_DATA_EXTENSION_TIME_IN_DAYS)?"":s.MAX_DATA_EXTENSION_TIME_IN_DAYS,catalog:s.catalog,catalogMgmt:s.catalogMgmt,catalogExternal:s.catalogExternal,catalogSync:s.catalogSync,storageSerializationPolicy:s.storageSerializationPolicy,changeTracking:s.changeTracking,defaultDdlCollation:s.defaultDdlCollation,catalogTableName:s.catalogTableName,catalogNamespace:s.catalogNamespace,metadataFilePath:s.metadataFilePath,replaceInvalidCharacters:s.replaceInvalidCharacters,autoRefresh:s.autoRefresh},selectStatement:s.selectStatement,isCaseSensitive:s.isCaseSensitive,clusteringKey:Array.isArray(s.clusteringKey)?s.clusteringKey.map(P=>I(s.isCaseSensitive,d,P)).filter(Boolean):[],partitioningKey:s.partitioningKey,comment:s.description,copyGrants:s.copyGrants,dataRetentionTime:isNaN(s.DATA_RETENTION_TIME_IN_DAYS)?"":s.DATA_RETENTION_TIME_IN_DAYS,fileFormat:j,formatName:s.customFileFormatName,formatTypeOptions:ae(s.formatTypeOptions)?{}:C(m(j,s.formatTypeOptions)),copyOptions:ae(s.stageCopyOptions)?{}:C(g(s.stageCopyOptions)),cloneTableName:p(s.isCaseSensitive,ne(e,`relatedSchemas[${s.clone}].code`,"")),likeTableName:p(s.isCaseSensitive,ne(e,`relatedSchemas[${s.like}].code`,"")),cloneParams:ae(s.cloneParams)?{}:{atOrBefore:Tr(s.cloneParams.atOrBefore),TIMESTAMP:s.cloneParams.TIMESTAMP,OFFSET:s.cloneParams.OFFSET,STATEMENT:s.cloneParams.STATEMENT},externalOptions:{location:or(s.location)?k(s.location):"",REFRESH_ON_CREATE:_(s.REFRESH_ON_CREATE),AUTO_REFRESH:_(s.AUTO_REFRESH),PATTERN:s.PATTERN?F(s.PATTERN):""},columns:s.external?e.columnDefinitions.map(oe):e.columns,compositePrimaryKeys:Object.entries(se).map(([P,Y])=>ce({name:P,keys:Y,keyType:"PRIMARY KEY",isActivated:d.isActivated,isCaseSensitive:s.isCaseSensitive})),compositeUniqueKeys:Object.entries(ee).map(([P,Y])=>ce({name:P,keys:Y,keyType:"UNIQUE",isActivated:d.isActivated,isCaseSensitive:s.isCaseSensitive})),tableTags:s.tableTags??[]}},hydrateView({viewData:e,entityData:o}){let d=o[0],{databaseName:s,schemaName:x}=e.schemaData,b=p(d.isCaseSensitive,e.name),H=a(s,a(x,b));return{...e,name:p(d.isCaseSensitive,e.name),selectStatement:d.selectStatement,isCaseSensitive:d.isCaseSensitive,copyGrants:d.copyGrants,comment:d.description,secure:d.secure,materialized:d.materialized,fullName:H,clusteringKey:d.clusteringKey,viewTags:d.viewTags??[]}},hydrateViewColumn(e){var o,d,s;return e.entityName?{...e,name:p((o=e.definition)==null?void 0:o.isCaseSensitive,e.name),dbName:p((d=We(e.containerData))==null?void 0:d.isCaseSensitive,e.dbName),entityName:p((s=We(e.entityData))==null?void 0:s.isCaseSensitive,e.entityName)}:e},commentIfDeactivated(e,o,d){return le(e,o,d)},alterTable(e){if(e.iceberg)return"// Dynamic Iceberg tables are currently only supported for CREATE statements. Specifying DYNAMIC ICEBERG in any other command (for example, ALTER DYNAMIC ICEBERG TABLE <name>) results in an error.";let o=Je(q.alterTableScript,{dynamic:e.dynamic,...e.nameData}),{script:d}=Ne(Qe(q.alterTableScript,q.alterEntityRename),ue(o),Se(o),rn(o,D),an(o,U),Le(o))({data:e,script:[]});return d.join(`
`)},hydrateAlertTable(e){var s,x,b,H;let{data:o}=Ne(Ze,tn,pr,Nr,ze,Sr(C,g),Ke("tableTags"))({collection:e,data:{}}),d=C(m(o.formatData.fileFormat,o.formatTypeOptions.typeOptions));return{...o,dynamic:e.role.dynamic,iceberg:((x=(s=e.compMod)==null?void 0:s.iceberg)==null?void 0:x.old)||((H=(b=e.compMod)==null?void 0:b.iceberg)==null?void 0:H.new),formatTypeOptions:{...o.formatTypeOptions,typeOptions:d}}},alterView(e){let{nameData:o}=e,d=o.isMaterialized?"alterMaterializedViewScript":"alterViewScript",s=Je(q[d],o),{script:x}=Ne(Qe(q[d],q.alterEntityRename),ue(s),Se(s),Le(s))({data:e,script:[]});return x.join(`
`)},hydrateAlterView(e){let{data:o}=Ne(Ze,tn,ze,Ke("viewTags"))({collection:e,data:{}});return o},alterSchema(e){let o=nn(e==null?void 0:e.nameData),{script:d}=Ne(Ie,ue(o),Se(o),Me(o),Le(o))({data:e,script:[]});return d.join(`
`)},hydrateAlterSchema(e){return Ne(Ze,ur,ze,Ar,Ke("schemaTags"))({collection:e,data:{}}).data},hydrateForDeleteSchema(e){let o=p(e.isCaseSensitive,y(e)),d=p(e.isCaseSensitive,e.database);return{name:a(d,o)}},dropSchema({name:e}){return c(q.dropSchema,{name:e})},createTag({tag:e,schemaName:o,isCaseSensitive:d}){return c(q.createTag,{orReplace:Ue(e.orReplace),ifNotExist:mn(e.ifNotExist),allowedValues:Fe({allowedValues:e.allowedValues}),name:a(o,p(d,e.name)),comment:he(e.description)})},dropTag({tag:e,schemaName:o,isCaseSensitive:d}){return c(q.dropTag,{name:a(o,p(d,e.name))})},alterTag({tag:e,oldTag:o,schemaName:d,isCaseSensitive:s}){let x=a(d,p(s,o.name)),b=a(d,p(s,e.name)),H=Qt(e.allowedValues,({value:P})=>P).filter(Boolean),T=Qt(o.allowedValues,({value:P})=>P).filter(Boolean),j=Zt(e.allowedValues,o.allowedValues,({value:P})=>P),k=Zt(o.allowedValues,e.allowedValues,({value:P})=>P),W=x!==b,B=o.description&&!e.description,me=!B&&e.description!==o.description,re=T.length&&!H.length,se=[],ee=n((P,Y)=>{if(P){let z=c(q.alterTag,Y);se.push(z)}},"createAndPushStatement");return ee(W,{ifExists:V("IF EXISTS"),name:x,option:"RENAME TO ",optionValue:p(s,e.name)}),ee(re,{name:b,option:"UNSET ALLOWED_VALUES"}),ee(!re&&!ae(k),{ifExists:V("IF EXISTS"),name:b,option:"DROP",optionValue:Fe({allowedValues:k})}),ee(!ae(j),{ifExists:V("IF EXISTS"),name:b,option:"ADD",optionValue:Fe({allowedValues:j})}),ee(B,{ifExists:V("IF EXISTS"),name:b,option:"UNSET COMMENT"}),ee(me,{ifExists:V("IF EXISTS"),name:b,option:"SET COMMENT = ",optionValue:F(e.description)}),se.join("")}}};
